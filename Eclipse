-- Eclipse Hub - Animal Simulator
-- Converted from Osmium Library
-- By Astral

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")

-- Executor detection
local ExecutorName =
    (identifyexecutor and identifyexecutor())
    or (getexecutorname and getexecutorname())
    or "Unknown"

local Supported = 0
local Total = 0

local function Check(func)
    Total += 1
    if pcall(func) then
        Supported += 1
    end
end

local localPlayer = Players.LocalPlayer

-- Variables globales
local toggles = {
    antiAFK = false,
    autoFarm = false,
    autoCoin = false,
    bossFarm = false,
    orbitAll = false,
    orbitAllLowLvl = false,
    respawnAtDeath = false,
    killAura = false,
    targetedOrbit = false
}

local settings = {
    orbitalSpeed = 25,
    orbitalRadius = 15,
    farmDistance = 15,
    selectedTarget = nil
}

-- Charger Eclipse Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/astral-123/Library/refs/heads/main/Library.lua"))()

-- Compatibility checks
Check(function() game:HttpGet("https://example.com") end)
Check(function() loadstring("return true")() end)
Check(function() game:GetService("VirtualUser") end)
Check(function() assert(Library and Library.CreateWindow) end)

local CompatibilityPercent = math.floor((Supported / Total) * 100)

-- Cr√©er la fen√™tre principale
local Window = Library:CreateWindow({
    Name = "üåô Eclipse Hub - Animal Simulator",
    Icon = 10723407389,
    LoadingTitle = "Eclipse Hub",
    LoadingSubtitle = "Animal Simulator by Astral",
    Theme = "Default",
    ToggleUIKeybind = "V",
    ConfigurationSaving = {
        Enabled = false,
        FolderName = nil,
        FileName = "EclipseAnimalSim"
    }
})

-- Notification de bienvenue
Window:Notify({
    Title = "Welcome!",
    Content = "Eclipse Hub loaded successfully!",
    Duration = 3
})

-- ==================== TAB HOME ====================
local TabHome = Window:CreateTab({
    Name = "üè† Home",
    Icon = "rbxassetid://10734950309"
})

TabHome:CreateParagraph("Welcome to Eclipse Hub", "Made by Astral - Animal Simulator Script")

TabHome:CreateSection("Anti AFK")

-- Anti AFK simple
local antiAFKConnection = nil
TabHome:CreateCheckbox({
    Name = "üîÑ Anti AFK",
    Default = false,
    Callback = function(value)
        toggles.antiAFK = value
        
        if toggles.antiAFK then
            print("‚úÖ Anti AFK Activated")
            
            -- D√©connecter l'ancien si existant
            if antiAFKConnection then
                antiAFKConnection:Disconnect()
            end
            
            -- M√©thode simple : emp√™cher le kick AFK
            antiAFKConnection = game:GetService("Players").LocalPlayer.Idled:Connect(function()
                local VirtualUser = game:GetService("VirtualUser")
                VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                wait(1)
                VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            end)
        else
            print("‚ùå Anti AFK Deactivated")
            if antiAFKConnection then
                antiAFKConnection:Disconnect()
                antiAFKConnection = nil
            end
        end
    end
})

-- ==================== TAB FARMING ====================
local TabFarming = Window:CreateTab({
    Name = "‚öîÔ∏è Farming",
    Icon = "rbxassetid://10723407389"
})

TabFarming:CreateParagraph("Farming Features", "Auto farm dummies and collect coins")

TabFarming:CreateSection("Auto Farm")

TabFarming:CreateCheckbox({
    Name = "ü§ñ Auto Farm (5k+ Dummies)",
    Default = false,
    Callback = function(value)
        toggles.autoFarm = value
        
        if toggles.autoFarm then
            print("‚úÖ Auto Farm Started")
            task.spawn(function()
                while toggles.autoFarm do
                    pcall(function()
                        local char = localPlayer.Character
                        local hrp = char and char:FindFirstChild("HumanoidRootPart")
                        if not hrp then return end
                        
                        local level = localPlayer:FindFirstChild("leaderstats") and localPlayer.leaderstats:FindFirstChild("Level") and localPlayer.leaderstats.Level.Value
                        local dummy
                        
                        if level and level < 5000 then
                            dummy = workspace:FindFirstChild("MAP") and workspace.MAP:FindFirstChild("dummies") and workspace.MAP.dummies:FindFirstChild("Dummy")
                        else
                            dummy = workspace:FindFirstChild("MAP") and workspace.MAP:FindFirstChild("5k_dummies") and workspace.MAP["5k_dummies"]:FindFirstChild("Dummy2")
                        end
                        
                        if dummy and dummy:FindFirstChild("Humanoid") and dummy:FindFirstChild("HumanoidRootPart") and dummy.Humanoid.Health > 0 then
                            -- TP instantan√©
                            hrp.CFrame = dummy.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                            
                            -- Attack
                            ReplicatedStorage:WaitForChild("jdskhfsIIIllliiIIIdchgdIiIIIlIlIli"):FireServer(dummy.Humanoid, 2)
                            
                            -- Skill
                            if ReplicatedStorage:FindFirstChild("SkillsInRS") and ReplicatedStorage.SkillsInRS:FindFirstChild("RemoteEvent") then
                                ReplicatedStorage.SkillsInRS.RemoteEvent:FireServer(dummy.HumanoidRootPart.Position, "NewLightningball")
                            end
                        end
                    end)
                    wait(0)
                end
            end)
        else
            print("‚ùå Auto Farm Stopped")
        end
    end
})

TabFarming:CreateCheckbox({
    Name = "üí∞ Auto Collect Coins",
    Default = false,
    Callback = function(value)
        toggles.autoCoin = value
        
        if toggles.autoCoin then
            print("‚úÖ Auto Coin Activated")
            task.spawn(function()
                while toggles.autoCoin do
                    pcall(function()
                        ReplicatedStorage:WaitForChild("Events"):WaitForChild("CoinEvent"):FireServer()
                    end)
                    task.wait(0.1)
                end
            end)
        else
            print("‚ùå Auto Coin Deactivated")
        end
    end
})

TabFarming:CreateSection("Boss Farm")

TabFarming:CreateCheckbox({
    Name = "üëπ Auto Farm All Bosses",
    Default = false,
    Callback = function(value)
        toggles.bossFarm = value
        
        if toggles.bossFarm then
            print("‚úÖ Boss Farm Started")
            task.spawn(function()
                local bossList = {"CRABBOSS", "CENTAUR", "BOSSBEAR", "BOSSDEER", "DragonGiraffe", "Griffin", "LavaGorilla"}
                while toggles.bossFarm do
                    pcall(function()
                        local npcFolder = workspace:FindFirstChild("NPC")
                        if npcFolder then
                            for _, bossName in ipairs(bossList) do
                                local boss = npcFolder:FindFirstChild(bossName)
                                if boss and boss:FindFirstChild("Humanoid") and boss.Humanoid.Health > 0 then
                                    ReplicatedStorage:WaitForChild("jdskhfsIIIllliiIIIdchgdIiIIIlIlIli"):FireServer(boss.Humanoid, 1)
                                end
                            end
                        end
                    end)
                    task.wait(0.1)
                end
            end)
        else
            print("‚ùå Boss Farm Stopped")
        end
    end
})

-- ==================== TAB PVP ====================
local TabPvP = Window:CreateTab({
    Name = "‚öîÔ∏è PvP",
    Icon = "rbxassetid://10747384394"
})

TabPvP:CreateParagraph("PvP Features", "Advanced combat automation")

TabPvP:CreateSection("Orbit Combat")

TabPvP:CreateCheckbox({
    Name = "üåÄ Orbit All Players",
    Default = false,
    Callback = function(value)
        toggles.orbitAll = value
        
        if toggles.orbitAll then
            print("‚úÖ Orbit All Activated")
            task.spawn(function()
                local angle = 0
                local currentTarget = nil
                
                while toggles.orbitAll do
                    pcall(function()
                        -- Trouver les joueurs valides (PAS dans la Fighting Zone)
                        local validTargets = {}
                        for _, p in pairs(Players:GetPlayers()) do
                            if p ~= localPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                                -- V√©rifier si le joueur N'EST PAS dans la Fighting Zone
                                local fightingZone = workspace:FindFirstChild("FightingArea") and workspace.FightingArea:FindFirstChild("FightingZonePart")
                                local inZone = false
                                
                                if fightingZone then
                                    local hrpPos = p.Character.HumanoidRootPart.Position
                                    local zonePos = fightingZone.Position
                                    local zoneSize = fightingZone.Size
                                    
                                    if hrpPos.X >= zonePos.X - zoneSize.X/2 and hrpPos.X <= zonePos.X + zoneSize.X/2 and
                                       hrpPos.Y >= zonePos.Y - zoneSize.Y/2 and hrpPos.Y <= zonePos.Y + zoneSize.Y/2 and
                                       hrpPos.Z >= zonePos.Z - zoneSize.Z/2 and hrpPos.Z <= zonePos.Z + zoneSize.Z/2 then
                                        inZone = true
                                    end
                                end
                                
                                if not inZone then
                                    table.insert(validTargets, p)
                                end
                            end
                        end
                        
                        if #validTargets > 0 then
                            if not currentTarget or not table.find(validTargets, currentTarget) then
                                currentTarget = validTargets[math.random(1, #validTargets)]
                                print("üéØ New target: " .. currentTarget.Name)
                            end
                            
                            local hrp = localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart")
                            local targetHRP = currentTarget.Character and currentTarget.Character:FindFirstChild("HumanoidRootPart")
                            local targetHumanoid = currentTarget.Character and currentTarget.Character:FindFirstChild("Humanoid")
                            
                            if hrp and targetHRP and targetHumanoid then
                                angle = angle + 0.5
                                local radius = 15
                                local offset = Vector3.new(
                                    math.cos(angle) * radius,
                                    0,
                                    math.sin(angle) * radius
                                )
                                
                                hrp.CFrame = CFrame.new(targetHRP.Position + offset, targetHRP.Position)
                                
                                ReplicatedStorage:WaitForChild("jdskhfsIIIllliiIIIdchgdIiIIIlIlIli"):FireServer(targetHumanoid, 2)
                                
                                if ReplicatedStorage:FindFirstChild("SkillsInRS") and ReplicatedStorage.SkillsInRS:FindFirstChild("RemoteEvent") then
                                    ReplicatedStorage.SkillsInRS.RemoteEvent:FireServer(targetHRP.Position, "NewLightningball")
                                end
                            end
                        else
                            currentTarget = nil
                        end
                    end)
                    
                    wait(0.03)
                end
            end)
        else
            print("‚ùå Orbit All Deactivated")
        end
    end
})

TabPvP:CreateCheckbox({
    Name = "üåÄ Orbit All Low Level",
    Default = false,
    Callback = function(value)
        toggles.orbitAllLowLvl = value
        
        if toggles.orbitAllLowLvl then
            print("‚úÖ Orbit All Low Level Activated")
            task.spawn(function()
                local angle = 0
                local currentTarget = nil
                
                while toggles.orbitAllLowLvl do
                    pcall(function()
                        local myLevel = localPlayer:FindFirstChild("leaderstats") and localPlayer.leaderstats:FindFirstChild("Level") and localPlayer.leaderstats.Level.Value or 0
                        
                        local validTargets = {}
                        for _, p in pairs(Players:GetPlayers()) do
                            if p ~= localPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                                local targetLevel = p:FindFirstChild("leaderstats") and p.leaderstats:FindFirstChild("Level") and p.leaderstats.Level.Value or 0
                                
                                if targetLevel < myLevel then
                                    local fightingZone = workspace:FindFirstChild("FightingArea") and workspace.FightingArea:FindFirstChild("FightingZonePart")
                                    local inZone = false
                                    
                                    if fightingZone then
                                        local hrpPos = p.Character.HumanoidRootPart.Position
                                        local zonePos = fightingZone.Position
                                        local zoneSize = fightingZone.Size
                                        
                                        if hrpPos.X >= zonePos.X - zoneSize.X/2 and hrpPos.X <= zonePos.X + zoneSize.X/2 and
                                           hrpPos.Y >= zonePos.Y - zoneSize.Y/2 and hrpPos.Y <= zonePos.Y + zoneSize.Y/2 and
                                           hrpPos.Z >= zonePos.Z - zoneSize.Z/2 and hrpPos.Z <= zonePos.Z + zoneSize.Z/2 then
                                            inZone = true
                                        end
                                    end
                                    
                                    if not inZone then
                                        table.insert(validTargets, p)
                                    end
                                end
                            end
                        end
                        
                        if #validTargets > 0 then
                            if not currentTarget or not table.find(validTargets, currentTarget) then
                                currentTarget = validTargets[math.random(1, #validTargets)]
                                local targetLevel = currentTarget:FindFirstChild("leaderstats") and currentTarget.leaderstats:FindFirstChild("Level") and currentTarget.leaderstats.Level.Value or 0
                                print("üéØ New low level target: " .. currentTarget.Name .. " (Level " .. targetLevel .. ")")
                            end
                            
                            local hrp = localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart")
                            local targetHRP = currentTarget.Character and currentTarget.Character:FindFirstChild("HumanoidRootPart")
                            local targetHumanoid = currentTarget.Character and currentTarget.Character:FindFirstChild("Humanoid")
                            
                            if hrp and targetHRP and targetHumanoid then
                                angle = angle + 0.5
                                local radius = 15
                                local offset = Vector3.new(
                                    math.cos(angle) * radius,
                                    0,
                                    math.sin(angle) * radius
                                )
                                
                                hrp.CFrame = CFrame.new(targetHRP.Position + offset, targetHRP.Position)
                                
                                ReplicatedStorage:WaitForChild("jdskhfsIIIllliiIIIdchgdIiIIIlIlIli"):FireServer(targetHumanoid, 2)
                                
                                if ReplicatedStorage:FindFirstChild("SkillsInRS") and ReplicatedStorage.SkillsInRS:FindFirstChild("RemoteEvent") then
                                    ReplicatedStorage.SkillsInRS.RemoteEvent:FireServer(targetHRP.Position, "NewLightningball")
                                end
                            end
                        else
                            currentTarget = nil
                        end
                    end)
                    
                    wait(0.03)
                end
            end)
        else
            print("‚ùå Orbit All Low Level Deactivated")
        end
    end
})

TabPvP:CreateSection("Kill Aura")

TabPvP:CreateCheckbox({
    Name = "üíÄ Kill Aura (Nearest)",
    Default = false,
    Callback = function(value)
        toggles.killAura = value
        
        if toggles.killAura then
            print("‚úÖ Kill Aura Activated")
            task.spawn(function()
                while toggles.killAura do
                    pcall(function()
                        local char = localPlayer.Character
                        local hrp = char and char:FindFirstChild("HumanoidRootPart")
                        
                        if hrp then
                            local nearestPlayer = nil
                            local nearestDistance = math.huge
                            
                            for _, player in pairs(Players:GetPlayers()) do
                                if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChild("Humanoid") and player.Character.Humanoid.Health > 0 then
                                    local distance = (hrp.Position - player.Character.HumanoidRootPart.Position).Magnitude
                                    if distance < nearestDistance then
                                        nearestDistance = distance
                                        nearestPlayer = player
                                    end
                                end
                            end
                            
                            if nearestPlayer and nearestPlayer.Character then
                                local targetHRP = nearestPlayer.Character:FindFirstChild("HumanoidRootPart")
                                local targetHumanoid = nearestPlayer.Character:FindFirstChild("Humanoid")
                                
                                if targetHRP and targetHumanoid then
                                    ReplicatedStorage:WaitForChild("jdskhfsIIIllliiIIIdchgdIiIIIlIlIli"):FireServer(targetHumanoid, 2)
                                    
                                    if ReplicatedStorage:FindFirstChild("SkillsInRS") and ReplicatedStorage.SkillsInRS:FindFirstChild("RemoteEvent") then
                                        ReplicatedStorage.SkillsInRS.RemoteEvent:FireServer(targetHRP.Position, "NewLightningball")
                                    end
                                end
                            end
                        end
                    end)
                    
                    task.wait(0.1)
                end
            end)
        else
            print("‚ùå Kill Aura Deactivated")
        end
    end
})

TabPvP:CreateSection("Targeted Attack")

-- Player Dropdown
local function getPlayerList()
    local playerList = {}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            table.insert(playerList, player.Name)
        end
    end
    return playerList
end

local playerDropdown = TabPvP:CreateDropdown({
    Name = "üéØ Select Target Player",
    Options = getPlayerList(),
    Default = getPlayerList()[1] or "No Players",
    Callback = function(value)
        for _, player in pairs(Players:GetPlayers()) do
            if player.Name == value then
                settings.selectedTarget = player
                print("üéØ Target selected:", value)
                break
            end
        end
    end
})

-- Refresh player list every 5 seconds
task.spawn(function()
    while task.wait(5) do
        pcall(function()
            if playerDropdown and playerDropdown.Refresh then
                playerDropdown:Refresh(getPlayerList())
            end
        end)
    end
end)

TabPvP:CreateCheckbox({
    Name = "üéØ Targeted Orbit Attack",
    Default = false,
    Callback = function(value)
        toggles.targetedOrbit = value
        
        if toggles.targetedOrbit then
            if not settings.selectedTarget then
                print("‚ùå Please select a target first!")
                Window:Notify({
                    Title = "Error",
                    Content = "Please select a target first!",
                    Duration = 2
                })
                toggles.targetedOrbit = false
                return
            end
            
            print("‚úÖ Targeted Orbit on " .. settings.selectedTarget.Name)
            task.spawn(function()
                local angle = 0
                
                while toggles.targetedOrbit do
                    pcall(function()
                        local target = settings.selectedTarget
                        
                        if not target or not Players:FindFirstChild(target.Name) or not target.Character or not target.Character:FindFirstChild("HumanoidRootPart") or not target.Character:FindFirstChild("Humanoid") or target.Character.Humanoid.Health <= 0 then
                            print("‚ùå Target lost or died!")
                            toggles.targetedOrbit = false
                            return
                        end
                        
                        local hrp = localPlayer.Character and localPlayer.Character:FindFirstChild("HumanoidRootPart")
                        local targetHRP = target.Character:FindFirstChild("HumanoidRootPart")
                        local targetHumanoid = target.Character:FindFirstChild("Humanoid")
                        
                        if hrp and targetHRP and targetHumanoid then
                            angle = angle + 0.5
                            local radius = 15
                            local offset = Vector3.new(
                                math.cos(angle) * radius,
                                0,
                                math.sin(angle) * radius
                            )
                            hrp.CFrame = CFrame.new(targetHRP.Position + offset, targetHRP.Position)
                            
                            ReplicatedStorage:WaitForChild("jdskhfsIIIllliiIIIdchgdIiIIIlIlIli"):FireServer(targetHumanoid, 2)
                            
                            if ReplicatedStorage:FindFirstChild("SkillsInRS") then
                                ReplicatedStorage.SkillsInRS.RemoteEvent:FireServer(targetHRP.Position, "NewLightningball")
                            end
                        end
                    end)
                    
                    wait(0.03)
                end
            end)
        else
            print("‚ùå Targeted Orbit Deactivated")
        end
    end
})

-- ==================== TAB SCRIPTS ====================
local TabScripts = Window:CreateTab({
    Name = "üìú Scripts",
    Icon = "rbxassetid://10723434711"
})

TabScripts:CreateParagraph("Utility Scripts", "Additional features and tools")

TabScripts:CreateSection("Respawn")

TabScripts:CreateCheckbox({
    Name = "üìç Respawn at Death Position",
    Default = false,
    Callback = function(value)
        toggles.respawnAtDeath = value
        
        if toggles.respawnAtDeath then
            print("‚úÖ Respawn at Death Activated")
            
            local deathPosition = nil
            
            localPlayer.CharacterAdded:Connect(function(char)
                if toggles.respawnAtDeath and deathPosition then
                    task.wait(0.5)
                    local hrp = char:WaitForChild("HumanoidRootPart", 5)
                    if hrp then
                        hrp.CFrame = CFrame.new(deathPosition)
                        print("üìç Respawned at death position")
                    end
                end
            end)
            
            task.spawn(function()
                while toggles.respawnAtDeath do
                    pcall(function()
                        if localPlayer.Character and localPlayer.Character:FindFirstChild("Humanoid") then
                            localPlayer.Character.Humanoid.Died:Connect(function()
                                if localPlayer.Character:FindFirstChild("HumanoidRootPart") then
                                    deathPosition = localPlayer.Character.HumanoidRootPart.Position
                                end
                            end)
                        end
                    end)
                    task.wait(1)
                end
            end)
        else
            print("‚ùå Respawn at Death Deactivated")
        end
    end
})

TabScripts:CreateSection("External Scripts")

TabScripts:CreateButton({
    Name = "üîç Load Dex Explorer",
    Callback = function()
        print("üîç Loading Dex Explorer...")
        Window:Notify({
            Title = "Loading...",
            Content = "Loading Dex Explorer",
            Duration = 2
        })
        pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/infyiff/backup/main/dex.lua"))()
        end)
        print("‚úÖ Dex Explorer Loaded")
    end
})

TabScripts:CreateButton({
    Name = "‚öôÔ∏è Load Infinite Yield",
    Callback = function()
        print("‚öôÔ∏è Loading Infinite Yield...")
        Window:Notify({
            Title = "Loading...",
            Content = "Loading Infinite Yield",
            Duration = 2
        })
        pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
        end)
        print("‚úÖ Infinite Yield Loaded")
    end
})

-- ==================== TAB SETTINGS ====================
local TabSettings = Window:CreateTab({
    Name = "‚öôÔ∏è Settings",
    Icon = "rbxassetid://10734950309"
})

TabSettings:CreateSection("Information")

TabSettings:CreateParagraph("Owner Information", "Created by Astral for Eclipse Hub")

TabSettings:CreateLabel("Press 'V' to toggle UI visibility")

local icon =
    CompatibilityPercent >= 90 and "üü¢"
    or CompatibilityPercent >= 70 and "üü°"
    or "üî¥"

TabSettings:CreateLabel("Executor: " .. ExecutorName)
TabSettings:CreateLabel("Compatibility: " .. icon .. " " .. CompatibilityPercent .. "%")

TabSettings:CreateSection("Theme")

TabSettings:CreateDropdown({
    Name = "Select Theme",
    Options = {"Default", "Amethyst", "Ocean", "Rose", "Green"},
    Default = "Default",
    Callback = function(option)
        Window:Notify({
            Title = "Theme Changed",
            Content = "Please reload script to apply: " .. option,
            Duration = 3
        })
    end
})
